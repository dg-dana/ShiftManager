<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Family Shift Calendar</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <!-- User Management -->
    <section id="user-management">
      <h2>Family Members</h2>
      <div class="user-form">
        <input type="text" id="user-name" placeholder="Enter name">
        <input type="color" id="user-color" value="#FF6B6B">
        <button onclick="addUser()">Add User</button>
      </div>
      <div id="user-list"></div>
      <select id="active-user">
        <option value="">Select User</option>
      </select>
    </section>

    <!-- Shift Templates -->
    <section id="template-management">
      <h2>Shift Templates</h2>
      <div class="template-form">
        <select id="template-user">
          <option value="">Select User</option>
        </select>
        <input type="text" id="template-code" placeholder="Shift Code (e.g., FD)">
        <input type="text" id="template-name" placeholder="Shift Name">
        <input type="time" id="template-start">
        <input type="time" id="template-end">
        <button onclick="addTemplate()">Add Template</button>
      </div>
      <div id="template-list"></div>
    </section>

    <!-- Shift Input -->
    <section id="shift-input">
      <h2>Add Shifts</h2>
      <input type="text" id="shift-text" placeholder="e.g., FD 12.8 or NS 1.9-5.9">
      <button onclick="addShift()">Add Shift</button>
    </section>

    <!-- Calendar -->
    <section id="calendar">
      <h2>Shift Calendar</h2>
      <div class="calendar-controls">
        <button onclick="prevPeriod()">◄</button>
        <span id="calendar-month-year"></span>
        <button onclick="nextPeriod()">►</button>
        <div class="view-toggle">
          <button onclick="setView('month')" class="view-btn active" id="month-view">Month</button>
          <button onclick="setView('week')" class="view-btn" id="week-view">Week</button>
          <button onclick="setView('day')" class="view-btn" id="day-view">Day</button>
        </div>
      </div>
      <div id="calendar-grid"></div>
    </section>

    <!-- Import/Export -->
    <section id="import-export">
      <h2>Backup</h2>
      <input type="file" id="import-file" onchange="importData(event)">
      <button onclick="exportData()">Export Data</button>
    </section>
  </div>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";
    import { getAuth } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBCt2aZOWDLznozrVNTg4OIw7s5WBkx18Y",
      authDomain: "shift-calendar-18355.firebaseapp.com",
      projectId: "shift-calendar-18355",
      storageBucket: "shift-calendar-18355.firebasestorage.app",
      messagingSenderId: "29766311162",
      appId: "1:29766311162:web:11f376db291eae0550bd43",
      measurementId: "G-4PEYYWDTFD"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);

    // Make them available globally
    window.db = db;
    window.auth = auth;

    console.log("Firebase connected:", app.options.projectId);
  </script>

  <!-- Your scripts -->
  <script src="js/users.js"></script>
  <script src="js/templates.js"></script>
  <script src="js/parser.js"></script>
  <script src="js/calendar.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
