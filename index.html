<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shift Calendar</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  #user-list li { margin-bottom: 5px; }
  .user-color { display:inline-block; width:12px; height:12px; margin-right:5px; vertical-align:middle; }
  #calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-top: 20px; }
  .day { border:1px solid #ccc; padding:5px; min-height:50px; position:relative; }
  .day-header { background:#eee; font-weight:bold; text-align:center; }
  .shift { margin-top:2px; padding:2px; color:#fff; font-size:0.9em; border-radius:3px; display:flex; justify-content:space-between; align-items:center; }
  #debug-console { border:1px solid #ccc; height:150px; overflow:auto; margin-top:20px; padding:5px; font-size:0.8em; background:#f9f9f9; }
  button { margin-left:5px; }
</style>
</head>
<body>

<h1>Shift Calendar</h1>

<!-- User management -->
<h2>Users</h2>
<input type="text" id="user-name" placeholder="User name">
<button onclick="addUser()">Add User</button>
<ul id="user-list"></ul>

<!-- User filter -->
<h2>Filter</h2>
<select id="user-filter" onchange="renderCalendar()">
  <option value="all">All Users</option>
</select>

<!-- Shift input -->
<h2>Add Shift</h2>
<select id="active-user">
  <option value="">Select User</option>
</select>
<input type="text" id="shift-text" placeholder="Shift code + date (e.g., A 01.08 or B 01.08-03.08)">
<button onclick="addShift()">Add Shift</button>

<!-- Calendar -->
<h2>Calendar</h2>
<div>
  <button onclick="prevMonth()">&lt; Prev</button>
  <span id="month-year"></span>
  <button onclick="nextMonth()">Next &gt;</button>
</div>
<div id="calendar-grid"></div>

<!-- Export / Import -->
<h2>Data</h2>
<button onclick="exportData()">Export JSON</button>
<input type="file" id="import-file" onchange="importData(event)">

<!-- Debug console -->
<h2>Debug Console</h2>
<div id="debug-console"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  // ====== Firebase Configuration ======
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_AUTH_DOMAIN",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_STORAGE_BUCKET",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
</script>

<!-- Main script -->
<script src="your-script.js"></script>
<script>
  // Populate active-user dropdown whenever users update
  function updateActiveUserDropdown() {
    const select = document.getElementById('active-user');
    select.innerHTML = '<option value="">Select User</option>';
    users.forEach(user => {
      const opt = document.createElement('option');
      opt.value = user.id;
      opt.textContent = user.name;
      select.appendChild(opt);
    });
  }

  // Attach listener for users changes
  const origRenderUsers = renderUsers;
  renderUsers = function() {
    origRenderUsers();
    updateActiveUserDropdown();
  }
</script>

</body>
</html>
